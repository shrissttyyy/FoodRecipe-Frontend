name: Deploy Vite to GitHub Pages 
on: 
push: 
branches: [ main ] 
# run only when you push to main 
permissions: 
contents: read 
pages: write 
id-token: write 
jobs: 
build: 
runs-on: ubuntu-latest 
steps: 
- uses: actions/checkout@v4 
- uses: actions/setup-node@v4 
with: { node-version: '20' } 
- run: npm ci 
 - run: echo "VITE_API_URL=${{ secrets.VITE_API_URL }}" >> .env.production
- run: npm run build 
- run: cp dist/index.html dist/404.html 
# Fix React Router refresh 
- uses: actions/upload-pages-artifact@v3 
with: { path: './dist' } 
deploy: 
needs: build 
runs-on: ubuntu-latest 
environment: 
name: github-pages 
url: ${{ steps.deployment.outputs.page_url }} 
steps: 
- id: deployment 
uses: actions/deploy-pages@v4